# 画像整理ツール (Image Organization Tool)

大量の写真・動画の中からブレ画像・重複画像・類似画像を自動検出し、整理するためのデスクトップアプリです。

## 機能
- **スキャン**: 指定フォルダ内の画像 (JPG, PNG, HEIC, WebP) と動画 (MP4, AVI, MOV, MKV) を再帰的にスキャンします。
- **ブレ検出**: ラプラシアン分散を用いて画像のブレを判定します。
- **重複・類似検出**: 知覚ハッシュ (pHash) を用いて類似画像・動画をグループ化します。
- **動画対応**: 動画ファイルの重複検出に対応（中央フレームからハッシュを計算）。
- **キャッシュ機能**: ハッシュとブレスコアをキャッシュし、2回目以降のスキャンを高速化します。
- **比較モード**: 類似画像を2枚並べて比較し、ズーム同期などで細部を確認できます。
- **安全な削除**: 削除対象のファイルは完全に削除されず、`_TrashFromTool_YYYYMMDD` フォルダへ移動されます。

## セットアップ

1.  **ライブラリのインストール**:
    ```bash
    pip install -r requirements.txt
    ```

2.  **アプリの起動**:
    ```bash
    python main.py
    ```

## 使い方

1.  **フォルダ選択**: 「フォルダを選択」ボタンをクリックし、整理したいフォルダを選びます。
2.  **スキャン開始**: 「スキャン開始」ボタンをクリックします。
    - 初回スキャン時はハッシュ計算に時間がかかりますが、2回目以降はキャッシュにより高速化されます。
3.  **結果の確認**:
    - **上段**: 選択した画像のプレビュー（2枚選択時は比較表示）。
    - **下段左**: 検出されたグループ一覧。
    - **下段中**: グループ内のサムネイル一覧。
    - **下段右**: 画像の詳細情報（解像度、撮影日時、ブレスコアなど）。
4.  **削除候補の選択**:
    - サムネイルのチェックボックス、または詳細パネルの「削除候補にする」ボタンで切り替えます。
    - **比較モード**: `Ctrl` キーを押しながらサムネイルを2つクリックすると、上段で並べて比較できます。
    - **ショートカット**: 
        - `Space`: 現在の画像の「削除候補」状態をトグル
        - `←/→`: グループ内の画像を移動
        - `↑/↓`: グループ間を移動
5.  **実行**:
    - 「処理を実行」ボタンをクリックすると、チェックを入れた画像がゴミ箱用フォルダへ移動されます。

## 開発情報
- **Core Logic**: `core/` パッケージ
- **UI**: `ui/` パッケージ
- **テスト**: `python tests/verify_core.py` (コアロジックの検証)
